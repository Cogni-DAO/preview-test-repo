schema_version: '0.1.4'

intent:
  name: dev-test-repo

# CI checks that must be required-by-branch-protection and green to merge.
# These are *status context names*, not workflow file names. 
# Cogni confirms these are enforced via Allstar.
required_status_contexts:
  - CI - PR
  - Security
  - Cogni Git PR Review

# Gates run in the order they appear below.
gates:
  # Governance policy - check required workflows exist and match contexts
  - type: governance-policy
    id: governance_policy
  - type: review-limits
    id: review_limits
    with:
      max_changed_files: 40
      max_total_diff_kb: 1500
  - type: goal-declaration
    id: goal_declaration
  - type: forbidden-scopes
    id: forbidden_scopes
  # Ensure AGENTS.md files are updated when code changes
  - type: agents-md-sync
    id: agents_md_sync
  - type: ai-rule
    with:
      rule_file: avoid-duplication.yaml
  - type: ai-rule
    with:
      rule_file: pr-syntropy-coherence.yaml
  - type: ai-rule
    with:
      rule_file: cogni-repo-goal-alignment.yaml
  - type: ai-rule
    with:
      rule_file: patterns-and-docs.yaml